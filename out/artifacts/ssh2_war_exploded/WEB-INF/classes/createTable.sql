DROP TABLE IF EXISTS teacher;
CREATE TABLE teacher (
  TEACHER_ID VARCHAR(10) NOT NULL ,
  TEACHER_NAME VARCHAR(10) NOT NULL,
  SEX VARCHAR(2) NOT NULL ,
  PROFESSION VARCHAR(40) NOT NULL,
  TELEPHONE VARCHAR(11),
  EMAIL VARCHAR(40),
  PASSWORD VARCHAR(40) NOT NULL ,
  PRIMARY KEY (TEACHER_ID)
);

DROP TABLE IF EXISTS student;
CREATE TABLE student (
  STUDENT_ID VARCHAR(10) NOT NULL,
  STUDENT_NAME VARCHAR(10) NOT NULL,
  CLASS_ID VARCHAR(20) NOT NULL ,
  SEX VARCHAR(2) NOT NULL ,
  ENTRANCE_DATE DATE NOT NULL,
  PASSWORD VARCHAR(40) NOT NULL,
  EMAIL VARCHAR(40) NOT NULL ,
  PRIMARY KEY (STUDENT_ID)
);

DROP TABLE IF EXISTS course;
CREATE TABLE course(
  COURSE_ID INT(10) NOT NULL AUTO_INCREMENT,
  COURSE_NAME VARCHAR(40) NOT NULL ,
  TEACHER_ID VARCHAR(10) NOT NULL ,
  CAPACITY INT(3) NOT NULL ,
  CREATE_TIME DATETIME NOT NULL ,
  PRIMARY KEY (COURSE_ID)
);

DROP TABLE IF EXISTS admin;
CREATE TABLE admin(
  ADMIN_ID VARCHAR(10) NOT NULL,
  ADMIN_NAME VARCHAR(10) NOT NULL ,
  CREATE_TIME DATETIME NOT NULL ,
  PASSWORD VARCHAR(10) NOT NULL ,
  PRIMARY KEY (ADMIN_ID)
);

DROP TABLE IF EXISTS student_course;
CREATE TABLE student_course(
  STUDENT_ID VARCHAR(10) NOT NULL ,
  COURSE_ID INT(10) NOT NULL ,
  GRAGE INT(3),
  PRIMARY KEY (STUDENT_ID,COURSE_ID),
  FOREIGN KEY (STUDENT_ID) REFERENCES student(STUDENT_ID),
  FOREIGN KEY (COURSE_ID) REFERENCES course(COURSE_ID)
);

DROP TABLE IF EXISTS group_course;
CREATE TABLE group_course(
  GROUP_ID INT(10) NOT NULL AUTO_INCREMENT,
  COURSE_ID INT(10) NOT NULL ,
  CAPACITY INT(3) NOT NULL ,
  NAME VARCHAR(20),
  LEADER_ID VARCHAR(10),
  GROUP_SCORE DOUBLE,
  PRIMARY KEY (GROUP_ID),
  FOREIGN KEY (LEADER_ID) REFERENCES student(STUDENT_ID)
);

DROP TABLE IF EXISTS group_student;
CREATE TABLE group_student(
  GROUP_ID INT(10) NOT NULL ,
  STUDENT_ID VARCHAR(10) NOT NULL,
  GRADE INT(3),
  PRIMARY KEY (GROUP_ID,STUDENT_ID),
  FOREIGN KEY (GROUP_ID) REFERENCES group_course(GROUP_ID),
  FOREIGN KEY (STUDENT_ID) REFERENCES student(STUDENT_ID)
);

DROP TABLE IF EXISTS homework;
CREATE TABLE homework(
  HOMEWORK_ID INT(10) NOT NULL AUTO_INCREMENT,
  COURSE_ID INT(10) NOT NULL ,
  CONTENT VARCHAR(100),
  RELEASETIME DATETIME NOT NULL ,
  DEADLINE DATETIME NOT NULL ,
  PRIMARY KEY (HOMEWORK_ID),
  FOREIGN KEY (COURSE_ID) REFERENCES course(COURSE_ID)
);

DROP TABLE IF EXISTS student_homework;
CREATE TABLE student_homework(
  STUDENT_ID VARCHAR(10) NOT NULL ,
  HOMEWORK_ID INT(10) NOT NULL ,
  SUBMISSION_TIME DATETIME NOT NULL ,
  SCORE INT(3) ,
  COMMENT VARCHAR(100),
  PRIMARY KEY (STUDENT_ID,HOMEWORK_ID),
  FOREIGN KEY (STUDENT_ID) REFERENCES student(STUDENT_ID),
  FOREIGN KEY (HOMEWORK_ID) REFERENCES homework(HOMEWORK_ID)
);
